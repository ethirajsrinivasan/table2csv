jQuery.fn.tableToCSV=function(){var t=function(t){return t=t.replace(/"/g,'\\"').replace(/'/g,"\\'"),'"'+t+'"'};$(this).each(function(){var e=($(this),$(this).find("caption").text()),n=[],i=[];$(this).find("tr").each(function(){var e=[];$(this).find("th").each(function(){var e=t($(this).text());n.push(e)}),$(this).find("td").each(function(){var n=t($(this).text());e.push(n)}),e=e.join(","),i.push(e)}),n=n.join(","),i=i.join("\n");var c=n+i,a="data:text/csv;charset=utf-8,"+encodeURIComponent(c),o=document.createElement("a");o.href=a;var h=(new Date).getTime();o.download=""==e?h+".csv":e+"-"+h+".csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)})};